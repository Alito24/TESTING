<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Card Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div class="container mx-auto text-center">
        <button id="generateCard" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mb-4">
            Generate Card
        </button>
        <div id="messageContainer" class="mb-4 text-red-500"></div>
        <div id="cardContainer" class="flex justify-center"></div>
    </div>

    <script>
        const API_KEY = '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';
        const ENDPOINT = 'https://api.groq.com/openai/v1/chat/completions';

        document.getElementById('generateCard').addEventListener('click', async () => {
            const cardContainer = document.getElementById('cardContainer');
            const messageContainer = document.getElementById('messageContainer');
            cardContainer.innerHTML = '';
            messageContainer.innerHTML = '';

            const rarity = Math.floor(Math.random() * 100) + 1;

            try {
                const response = await fetch(ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: "mixtral-8x7b-32768",
                        messages: [
                            {
                                role: "user",
                                content: "Generate a name for a card in a TCG Game. It could be any theme. Answer with the name only"
                            }
                        ]
                    })
                });

                // Log full response for debugging
                console.log('Response status:', response.status);
                console.log('Response headers:', Object.fromEntries(response.headers.entries()));

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`HTTP error! status: ${response.status}, body: ${errorText}`);
                }

                const data = await response.json();
                console.log('Full API response:', data);

                const cardName = data.choices[0].message.content.trim();

                // Create card element
                const cardElement = document.createElement('div');
                cardElement.className = 'w-64 h-96 bg-white rounded-xl shadow-lg p-4 flex flex-col relative';

                // Rarity element
                const rarityElement = document.createElement('div');
                rarityElement.className = 'absolute bottom-4 right-4 text-gray-600 font-bold';
                rarityElement.textContent = `Rarity: ${rarity}`;

                // Title element
                const titleElement = document.createElement('div');
                titleElement.className = 'text-2xl font-bold text-center mt-4';
                titleElement.textContent = cardName;

                cardElement.appendChild(rarityElement);
                cardElement.appendChild(titleElement);
                cardContainer.appendChild(cardElement);

            } catch (error) {
                console.error('Full error:', error);
                messageContainer.textContent = `Error: ${error.message}`;
            }
        });
    </script>
</body>
</html>
